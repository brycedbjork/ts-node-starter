{"version":3,"sources":["../../../src/services/pay/charge.ts"],"names":["charge","uid","student","amount","currency","description","jobId","payingUser","receivingUser","req","res","body","status","send","error","console","log","Sentry","captureException"],"mappings":";;;;;;;AACA;;AACA;;;;;;;;AAGO,IAAMA,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBACpBC,GADoB,EAEpBC,OAFoB,EAGpBC,MAHoB,EAIpBC,QAJoB,EAKpBC,WALoB,EAMpBC,KANoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBASK,sBAAQL,GAAR,EAAa,OAAb,CATL;;AAAA;AASdM,YAAAA,UATc;AAAA;AAAA,mBAUQ,sBAAQL,OAAR,EAAiB,SAAjB,CAVR;;AAAA;AAUdM,YAAAA,aAVc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAANR,MAAM;AAAA;AAAA;AAAA,GAAZ;;;;;;;;;0BA+BQ,kBAAOS,GAAP,EAAiBC,GAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACb,gBAAI;AAAA,0BAKmDD,GAAG,CAACE,IALvD,EAEAV,GAFA,aAEAA,GAFA,EAGAC,OAHA,aAGAA,OAHA,EAIAI,KAJA,aAIAA,KAJA,EAOF;;AACAI,cAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;AACD,aATD,CASE,OAAOC,KAAP,EAAc;AACdJ,cAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,KAArB;AACAC,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAYF,KAAxB;AACAG,cAAAA,MAAM,CAACC,gBAAP,CAAwBJ,KAAxB;AACD;;AAdY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import moment from \"moment\";\nimport * as Sentry from \"@sentry/node\";\nimport { getUser } from \"../user/getUser\";\nimport { getJob } from \"../job/getJob\";\n\nexport const charge = async (\n  uid: string,\n  student: string,\n  amount: number,\n  currency: string,\n  description: string,\n  jobId?: string\n) => {\n  // get user docs\n  const payingUser = await getUser(uid, \"hirer\");\n  const receivingUser = await getUser(student, \"student\");\n\n  // make sure hirer can pay\n\n  // make sure student can receive payments\n\n  // charge paying user\n\n  // notify paying user\n\n  // payout student\n\n  // notify student\n\n  // payout referrals\n\n  // notify referrals\n\n  // add payment record to database\n};\n\nexport default async (req: any, res: any) => {\n  try {\n    const {\n      uid,\n      student,\n      jobId\n    }: { uid: string; student: string; jobId: string } = req.body;\n\n    // successful post\n    res.status(200).send();\n  } catch (error) {\n    res.status(500).send(error);\n    console.log(\"Error: \" + error);\n    Sentry.captureException(error);\n  }\n};\n"],"file":"charge.js"}