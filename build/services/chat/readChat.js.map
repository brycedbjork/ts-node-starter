{"version":3,"sources":["../../../src/services/chat/readChat.ts"],"names":["readChat","uid","chatId","chatData","req","res","body","status","send","console","log","Sentry","captureException"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;AAEA,IAAMA,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAG,iBAAOC,GAAP,EAAoBC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACQ,sBAAQA,MAAR,CADR;;AAAA;AACTC,YAAAA,QADS;AAAA;AAAA,mBAGT,6BAAWD,MAAX,wCACQD,GADR,GACgB,IADhB,EAHS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAARD,QAAQ;AAAA;AAAA;AAAA,GAAd;;;;;;;0BAQe,kBAAOI,GAAP,EAAiBC,GAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAE8CD,GAAG,CAACE,IAFlD,EAEHL,GAFG,aAEHA,GAFG,EAEEC,MAFF,aAEEA,MAFF;AAAA;AAAA,mBAILF,QAAQ,CAACC,GAAD,EAAMC,MAAN,CAJH;;AAAA;AAAA,8CAMJG,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,EANI;;AAAA;AAAA;AAAA;AAQXH,YAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,kBAArB;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAC,YAAAA,MAAM,CAACC,gBAAP;;AAVW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { getChat } from \"./getChat\";\nimport { updateChat } from \"./updateChat\";\nimport * as Sentry from \"@sentry/node\";\n\nconst readChat = async (uid: string, chatId: string) => {\n  const chatData = await getChat(chatId);\n\n  await updateChat(chatId, {\n    [`readyBy.${uid}`]: true\n  });\n};\n\nexport default async (req: any, res: any) => {\n  try {\n    const { uid, chatId }: { uid: string; chatId: string } = req.body;\n\n    await readChat(uid, chatId);\n\n    return res.status(200).send();\n  } catch (error) {\n    res.status(500).send(\"Something broke!\");\n    console.log(\"Error: \" + error);\n    Sentry.captureException(error);\n  }\n};\n"],"file":"readChat.js"}